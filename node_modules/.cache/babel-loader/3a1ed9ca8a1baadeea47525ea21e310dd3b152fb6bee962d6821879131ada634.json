{"ast":null,"code":"import { createRouter, createWebHistory } from 'vue-router';\nimport Home from '../views/Home.vue';\nimport Login from '../views/Login.vue';\nimport Admin from '../views/Admin.vue';\nconst routes = [{\n  path: '/',\n  name: 'Home',\n  component: Home\n}, {\n  path: '/login',\n  name: 'Login',\n  component: Login\n}, {\n  path: '/admin',\n  name: 'Admin',\n  component: Admin,\n  meta: {\n    requiresAuth: true\n  }\n}];\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes\n});\n\n// 路由守卫\nrouter.beforeEach((to, from, next) => {\n  if (to.meta.requiresAuth) {\n    const session = localStorage.getItem('session');\n    if (!session) {\n      next('/login');\n      return;\n    }\n    try {\n      const sessionData = JSON.parse(session);\n      if (sessionData.expires < Date.now()) {\n        localStorage.removeItem('session');\n        next('/login');\n        return;\n      }\n      next();\n    } catch {\n      localStorage.removeItem('session');\n      next('/login');\n    }\n  } else {\n    next();\n  }\n});\nexport default router;","map":{"version":3,"names":["createRouter","createWebHistory","Home","Login","Admin","routes","path","name","component","meta","requiresAuth","router","history","process","env","BASE_URL","beforeEach","to","from","next","session","localStorage","getItem","sessionData","JSON","parse","expires","Date","now","removeItem"],"sources":["C:/Users/Administrator/Desktop/test/src/router/index.js"],"sourcesContent":["import { createRouter, createWebHistory } from 'vue-router'\r\nimport Home from '../views/Home.vue'\r\nimport Login from '../views/Login.vue'\r\nimport Admin from '../views/Admin.vue'\r\n\r\nconst routes = [\r\n  {\r\n    path: '/',\r\n    name: 'Home',\r\n    component: Home\r\n  },\r\n  {\r\n    path: '/login',\r\n    name: 'Login',\r\n    component: Login\r\n  },\r\n  {\r\n    path: '/admin',\r\n    name: 'Admin',\r\n    component: Admin,\r\n    meta: { requiresAuth: true }\r\n  }\r\n]\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(process.env.BASE_URL),\r\n  routes\r\n})\r\n\r\n// 路由守卫\r\nrouter.beforeEach((to, from, next) => {\r\n  if (to.meta.requiresAuth) {\r\n    const session = localStorage.getItem('session');\r\n    if (!session) {\r\n      next('/login');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const sessionData = JSON.parse(session);\r\n      if (sessionData.expires < Date.now()) {\r\n        localStorage.removeItem('session');\r\n        next('/login');\r\n        return;\r\n      }\r\n      next();\r\n    } catch {\r\n      localStorage.removeItem('session');\r\n      next('/login');\r\n    }\r\n  } else {\r\n    next();\r\n  }\r\n})\r\n\r\nexport default router "],"mappings":"AAAA,SAASA,YAAY,EAAEC,gBAAgB,QAAQ,YAAY;AAC3D,OAAOC,IAAI,MAAM,mBAAmB;AACpC,OAAOC,KAAK,MAAM,oBAAoB;AACtC,OAAOC,KAAK,MAAM,oBAAoB;AAEtC,MAAMC,MAAM,GAAG,CACb;EACEC,IAAI,EAAE,GAAG;EACTC,IAAI,EAAE,MAAM;EACZC,SAAS,EAAEN;AACb,CAAC,EACD;EACEI,IAAI,EAAE,QAAQ;EACdC,IAAI,EAAE,OAAO;EACbC,SAAS,EAAEL;AACb,CAAC,EACD;EACEG,IAAI,EAAE,QAAQ;EACdC,IAAI,EAAE,OAAO;EACbC,SAAS,EAAEJ,KAAK;EAChBK,IAAI,EAAE;IAAEC,YAAY,EAAE;EAAK;AAC7B,CAAC,CACF;AAED,MAAMC,MAAM,GAAGX,YAAY,CAAC;EAC1BY,OAAO,EAAEX,gBAAgB,CAACY,OAAO,CAACC,GAAG,CAACC,QAAQ,CAAC;EAC/CV;AACF,CAAC,CAAC;;AAEF;AACAM,MAAM,CAACK,UAAU,CAAC,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;EACpC,IAAIF,EAAE,CAACR,IAAI,CAACC,YAAY,EAAE;IACxB,MAAMU,OAAO,GAAGC,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC;IAC/C,IAAI,CAACF,OAAO,EAAE;MACZD,IAAI,CAAC,QAAQ,CAAC;MACd;IACF;IAEA,IAAI;MACF,MAAMI,WAAW,GAAGC,IAAI,CAACC,KAAK,CAACL,OAAO,CAAC;MACvC,IAAIG,WAAW,CAACG,OAAO,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;QACpCP,YAAY,CAACQ,UAAU,CAAC,SAAS,CAAC;QAClCV,IAAI,CAAC,QAAQ,CAAC;QACd;MACF;MACAA,IAAI,CAAC,CAAC;IACR,CAAC,CAAC,MAAM;MACNE,YAAY,CAACQ,UAAU,CAAC,SAAS,CAAC;MAClCV,IAAI,CAAC,QAAQ,CAAC;IAChB;EACF,CAAC,MAAM;IACLA,IAAI,CAAC,CAAC;EACR;AACF,CAAC,CAAC;AAEF,eAAeR,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}